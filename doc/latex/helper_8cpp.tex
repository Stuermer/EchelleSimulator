\hypertarget{helper_8cpp}{}\section{/home/stuermer/\+Repos/cpp/\+Echelle\+Simulator/src/helper.cpp File Reference}
\label{helper_8cpp}\index{/home/stuermer/\+Repos/cpp/\+Echelle\+Simulator/src/helper.\+cpp@{/home/stuermer/\+Repos/cpp/\+Echelle\+Simulator/src/helper.\+cpp}}
{\ttfamily \#include \char`\"{}helper.\+h\char`\"{}}\\*
{\ttfamily \#include $<$vector$>$}\\*
{\ttfamily \#include $<$cmath$>$}\\*
{\ttfamily \#include \char`\"{}opencv2/core.\+hpp\char`\"{}}\\*
{\ttfamily \#include $<$iterator$>$}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$sstream$>$}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$cstdlib$>$}\\*
{\ttfamily \#include $<$opencv2/imgproc.\+hpp$>$}\\*
{\ttfamily \#include $<$highgui.\+h$>$}\\*
{\ttfamily \#include $<$C\+Cfits/\+F\+I\+T\+S.\+h$>$}\\*
{\ttfamily \#include $<$C\+Cfits/\+Ext\+H\+D\+U.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{helper_8cpp_aac009b3254038c9e2810c69ae21ec32a}{vector\+To\+File} (std\+::vector$<$ double $>$ const \&vec, std\+::string const \&filename)
\item 
void \hyperlink{helper_8cpp_a6c0a198e7e2462a4cb6ce1c12f7c8a07}{Mat\+To\+File} (cv\+::\+Mat \&image, std\+::string const \&filename)
\item 
std\+::vector$<$ double $>$ \hyperlink{helper_8cpp_a2928b68f88cd2e1978c3e82614204b5e}{decompose\+\_\+matrix} (cv\+::\+Mat mat)
\item 
cv\+::\+Mat \hyperlink{helper_8cpp_a9f391b78cf660157816b7643d4a0aa54}{compose\+\_\+matrix} (std\+::vector$<$ double $>$ parameters)
\item 
std\+::vector$<$ std\+::size\+\_\+t $>$ \hyperlink{helper_8cpp_afc20b971601af7cbb79436a90beab01f}{compute\+\_\+sort\+\_\+order} (const std\+::vector$<$ double $>$ \&v)
\item 
void \hyperlink{helper_8cpp_afe024dd89b6f2aa7f81014b5040aa106}{show\+\_\+cv\+\_\+matrix} (cv\+::\+Mat img, std\+::string windowname=\char`\"{}image\char`\"{})
\item 
void \hyperlink{helper_8cpp_a270e0c15767b4a3273ae9b9d5b0d451b}{print\+\_\+cv\+\_\+matrix\+\_\+info} (cv\+::\+Mat img, std\+::string imagename=\char`\"{}Image\char`\"{})
\item 
double \hyperlink{helper_8cpp_ae8b627d14bbed33480e3977e30998850}{interpolate} (const std\+::map$<$ double, double $>$ \&data, double x)
\item 
herr\+\_\+t \hyperlink{helper_8cpp_aaba2c47b65195188060b2cf56017b1ea}{file\+\_\+info} (hid\+\_\+t loc\+\_\+id, const char $\ast$name, const H5\+L\+\_\+info\+\_\+t $\ast$linfo, void $\ast$opdata)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{helper.\+cpp@{helper.\+cpp}!compose\+\_\+matrix@{compose\+\_\+matrix}}
\index{compose\+\_\+matrix@{compose\+\_\+matrix}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{compose\+\_\+matrix(std\+::vector$<$ double $>$ parameters)}{compose_matrix(std::vector< double > parameters)}}]{\setlength{\rightskip}{0pt plus 5cm}cv\+::\+Mat compose\+\_\+matrix (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ double $>$}]{parameters}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_a9f391b78cf660157816b7643d4a0aa54}{}\label{helper_8cpp_a9f391b78cf660157816b7643d4a0aa54}
Composes 2x3 transformation matrix from shear, scale, rotation and translation parameters.


\begin{DoxyParams}{Parameters}
{\em parameters} & \mbox{[}sx, sy, shear, $ \phi $, tx, ty\mbox{]} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
2x3 transformation matrix 
\end{DoxyReturn}
\index{helper.\+cpp@{helper.\+cpp}!compute\+\_\+sort\+\_\+order@{compute\+\_\+sort\+\_\+order}}
\index{compute\+\_\+sort\+\_\+order@{compute\+\_\+sort\+\_\+order}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{compute\+\_\+sort\+\_\+order(const std\+::vector$<$ double $>$ \&v)}{compute_sort_order(const std::vector< double > &v)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$std\+::size\+\_\+t$>$ compute\+\_\+sort\+\_\+order (
\begin{DoxyParamCaption}
\item[{const std\+::vector$<$ double $>$ \&}]{v}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_afc20b971601af7cbb79436a90beab01f}{}\label{helper_8cpp_afc20b971601af7cbb79436a90beab01f}
Calculates sorted index array of a given vector.

Equivalent to numpy.\+argsort


\begin{DoxyParams}{Parameters}
{\em v} & vector to be sorted \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array of indices that would sort the vector v 
\end{DoxyReturn}
\index{helper.\+cpp@{helper.\+cpp}!decompose\+\_\+matrix@{decompose\+\_\+matrix}}
\index{decompose\+\_\+matrix@{decompose\+\_\+matrix}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{decompose\+\_\+matrix(cv\+::\+Mat mat)}{decompose_matrix(cv::Mat mat)}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ decompose\+\_\+matrix (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat}]{mat}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_a2928b68f88cd2e1978c3e82614204b5e}{}\label{helper_8cpp_a2928b68f88cd2e1978c3e82614204b5e}
Decomposes a 2x3 affine transformation matrix into its underlying geometric components.

A transformation matrix $ \begin{pmatrix} a & b & c \\ d & e & f \end{pmatrix} $ can be decomposed in rotation $ \phi $, scale in X-\/ and Y direction $ sx, sy $, shearing $ s $ and translation in X-\/ and Y $ tx, ty $.

The decomposition is not unique, there exist other decompositions. However, it seems that this particular decomposition is rather stable and for each component one gets a rather smooth function across an order.

\begin{DoxyWarning}{Warning}
When rotation $ \phi $ is close to 0, it sometimes alters between $ \pm 2\pi $. This is a problem when trying to make a smooth spline across an order. Temporary fix is to add $ 2 \pi $ when values are near $ -\pi $.
\end{DoxyWarning}

\begin{DoxyParams}{Parameters}
{\em mat} & 2x3 transformation matrix \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{[}sx, sy, shear, $ \phi $, tx, ty\mbox{]} 
\end{DoxyReturn}
\index{helper.\+cpp@{helper.\+cpp}!file\+\_\+info@{file\+\_\+info}}
\index{file\+\_\+info@{file\+\_\+info}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{file\+\_\+info(hid\+\_\+t loc\+\_\+id, const char $\ast$name, const H5\+L\+\_\+info\+\_\+t $\ast$linfo, void $\ast$opdata)}{file_info(hid_t loc_id, const char *name, const H5L_info_t *linfo, void *opdata)}}]{\setlength{\rightskip}{0pt plus 5cm}herr\+\_\+t file\+\_\+info (
\begin{DoxyParamCaption}
\item[{hid\+\_\+t}]{loc\+\_\+id, }
\item[{const char $\ast$}]{name, }
\item[{const H5\+L\+\_\+info\+\_\+t $\ast$}]{linfo, }
\item[{void $\ast$}]{opdata}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_aaba2c47b65195188060b2cf56017b1ea}{}\label{helper_8cpp_aaba2c47b65195188060b2cf56017b1ea}
\index{helper.\+cpp@{helper.\+cpp}!interpolate@{interpolate}}
\index{interpolate@{interpolate}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{interpolate(const std\+::map$<$ double, double $>$ \&data, double x)}{interpolate(const std::map< double, double > &data, double x)}}]{\setlength{\rightskip}{0pt plus 5cm}double interpolate (
\begin{DoxyParamCaption}
\item[{const std\+::map$<$ double, double $>$ \&}]{data, }
\item[{double}]{x}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_ae8b627d14bbed33480e3977e30998850}{}\label{helper_8cpp_ae8b627d14bbed33480e3977e30998850}
\index{helper.\+cpp@{helper.\+cpp}!Mat\+To\+File@{Mat\+To\+File}}
\index{Mat\+To\+File@{Mat\+To\+File}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{Mat\+To\+File(cv\+::\+Mat \&image, std\+::string const \&filename)}{MatToFile(cv::Mat &image, std::string const &filename)}}]{\setlength{\rightskip}{0pt plus 5cm}void Mat\+To\+File (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat \&}]{image, }
\item[{std\+::string const \&}]{filename}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_a6c0a198e7e2462a4cb6ce1c12f7c8a07}{}\label{helper_8cpp_a6c0a198e7e2462a4cb6ce1c12f7c8a07}
Saves an Open\+CV matrix to a text file

This function saves a cv\+::\+Mat matrix to a text file. The file is essentially a C\+SV file, but the matrix is \textquotesingle{}numpy\textquotesingle{} style, which means that is begins with \mbox{[} and ends with \mbox{]} characters. 
\begin{DoxyParams}{Parameters}
{\em image} & matrix to be saved \\
\hline
{\em filename} & path to output file \\
\hline
\end{DoxyParams}
\index{helper.\+cpp@{helper.\+cpp}!print\+\_\+cv\+\_\+matrix\+\_\+info@{print\+\_\+cv\+\_\+matrix\+\_\+info}}
\index{print\+\_\+cv\+\_\+matrix\+\_\+info@{print\+\_\+cv\+\_\+matrix\+\_\+info}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{print\+\_\+cv\+\_\+matrix\+\_\+info(cv\+::\+Mat img, std\+::string imagename=""Image"")}{print_cv_matrix_info(cv::Mat img, std::string imagename="Image")}}]{\setlength{\rightskip}{0pt plus 5cm}void print\+\_\+cv\+\_\+matrix\+\_\+info (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat}]{img, }
\item[{std\+::string}]{imagename}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_a270e0c15767b4a3273ae9b9d5b0d451b}{}\label{helper_8cpp_a270e0c15767b4a3273ae9b9d5b0d451b}
Prints out basic information about a Matrix/\+Image.

Prints type, dimensions, min-\/ and max value.


\begin{DoxyParams}{Parameters}
{\em img} & Matrix/\+Image to be evaluated. \\
\hline
{\em imagename} & Name of the matrix \\
\hline
\end{DoxyParams}
\index{helper.\+cpp@{helper.\+cpp}!show\+\_\+cv\+\_\+matrix@{show\+\_\+cv\+\_\+matrix}}
\index{show\+\_\+cv\+\_\+matrix@{show\+\_\+cv\+\_\+matrix}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{show\+\_\+cv\+\_\+matrix(cv\+::\+Mat img, std\+::string windowname=""image"")}{show_cv_matrix(cv::Mat img, std::string windowname="image")}}]{\setlength{\rightskip}{0pt plus 5cm}void show\+\_\+cv\+\_\+matrix (
\begin{DoxyParamCaption}
\item[{cv\+::\+Mat}]{img, }
\item[{std\+::string}]{windowname}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_afe024dd89b6f2aa7f81014b5040aa106}{}\label{helper_8cpp_afe024dd89b6f2aa7f81014b5040aa106}
Plots an Open\+CV matrix of type C\+V\+\_\+32.

For plotting a double/float matrix, the matrix needs to be rescaled before plotted on screen. 
\begin{DoxyParams}{Parameters}
{\em img} & Matrix/\+Image to be plotted \\
\hline
{\em windowname} & name of the window containing the plot \\
\hline
\end{DoxyParams}
\index{helper.\+cpp@{helper.\+cpp}!vector\+To\+File@{vector\+To\+File}}
\index{vector\+To\+File@{vector\+To\+File}!helper.\+cpp@{helper.\+cpp}}
\subsubsection[{\texorpdfstring{vector\+To\+File(std\+::vector$<$ double $>$ const \&vec, std\+::string const \&filename)}{vectorToFile(std::vector< double > const &vec, std::string const &filename)}}]{\setlength{\rightskip}{0pt plus 5cm}void vector\+To\+File (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ double $>$ const \&}]{vec, }
\item[{std\+::string const \&}]{filename}
\end{DoxyParamCaption}
)}\hypertarget{helper_8cpp_aac009b3254038c9e2810c69ae21ec32a}{}\label{helper_8cpp_aac009b3254038c9e2810c69ae21ec32a}
Saves vector to C\+SV File

This function saves a std double vector to a C\+SV file e.\+g. for easy plotting with python 
\begin{DoxyParams}{Parameters}
{\em vec} & vector to be saved \\
\hline
{\em filename} & path to output file \\
\hline
\end{DoxyParams}
